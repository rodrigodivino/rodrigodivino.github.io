import{_ as t,a as n,b as e,c as r,i,s as o,d as a,S as u,f as c,t as s,e as l,j as f,k as h,l as d,g as p,h as g,m as v,E as y,n as m,o as w,p as _,G as x,H as b,A}from"./client.b2ba3ad9.js";var T="http://www.w3.org/1999/xhtml",k={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function S(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),k.hasOwnProperty(n)?{space:k[n],local:t}:t}function j(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===T&&n.documentElement.namespaceURI===T?n.createElement(t):n.createElementNS(e,t)}}function C(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function D(t){var n=S(t);return(n.local?C:j)(n)}function E(){}function N(t){return null==t?E:function(){return this.querySelector(t)}}function B(){return[]}function H(t){return new Array(t.length)}function M(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}M.prototype={constructor:M,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $(t,n,e,r,i,o){for(var a,u=0,c=n.length,s=o.length;u<s;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new M(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function P(t,n,e,r,i,o,a){var u,c,s,l={},f=n.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(c=n[u])&&(d[u]=s="$"+a.call(c,c.__data__,u,n),s in l?i[u]=c:l[s]=c);for(u=0;u<h;++u)(c=l[s="$"+a.call(t,o[u],u,o)])?(r[u]=c,c.__data__=o[u],l[s]=null):e[u]=new M(t,o[u]);for(u=0;u<f;++u)(c=n[u])&&l[d[u]]===c&&(i[u]=c)}function U(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function O(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function q(t,n){return function(){this.setAttribute(t,n)}}function I(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function z(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function L(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function W(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function V(t){return function(){this.style.removeProperty(t)}}function Z(t,n,e){return function(){this.style.setProperty(t,n,e)}}function F(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function G(t,n){return t.style.getPropertyValue(n)||W(t).getComputedStyle(t,null).getPropertyValue(n)}function J(t){return function(){delete this[t]}}function K(t,n){return function(){this[t]=n}}function X(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function Y(t){return t.trim().split(/^|\s+/)}function Q(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function nt(t,n){for(var e=Q(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function et(t,n){for(var e=Q(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function rt(t){return function(){nt(this,t)}}function it(t){return function(){et(this,t)}}function ot(t,n){return function(){(n.apply(this,arguments)?nt:et)(this,t)}}function at(){this.textContent=""}function ut(t){return function(){this.textContent=t}}function ct(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function st(){this.innerHTML=""}function lt(t){return function(){this.innerHTML=t}}function ft(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function ht(){this.nextSibling&&this.parentNode.appendChild(this)}function dt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pt(){return null}function gt(){var t=this.parentNode;t&&t.removeChild(this)}function vt(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function yt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var mt={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(mt={mouseenter:"mouseover",mouseleave:"mouseout"}));function wt(t,n,e){return t=_t(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function _t(t,n,e){return function(r){try{t.call(this,this.__data__,n,e)}finally{}}}function xt(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function bt(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function At(t,n,e){var r=mt.hasOwnProperty(t.type)?wt:_t;return function(i,o,a){var u,c=this.__on,s=r(n,o,a);if(c)for(var l=0,f=c.length;l<f;++l)if((u=c[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=e),void(u.value=n);this.addEventListener(t.type,s,e),u={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(u):this.__on=[u]}}function Tt(t,n,e){var r=W(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function kt(t,n){return function(){return Tt(this,t,n)}}function St(t,n){return function(){return Tt(this,t,n.apply(this,arguments))}}var jt=[null];function Ct(t,n){this._groups=t,this._parents=n}function Dt(t){return"string"==typeof t?new Ct([[document.querySelector(t)]],[document.documentElement]):new Ct([[t]],jt)}Ct.prototype=function(){return new Ct([[document.documentElement]],jt)}.prototype={constructor:Ct,select:function(t){"function"!=typeof t&&(t=N(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=u[l])&&(a=t.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),s[l]=a);return new Ct(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?B:function(){return this.querySelectorAll(t)}}(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new Ct(r,i)},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new Ct(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),l=-1,this.each((function(t){p[++l]=t})),p;var e,r=n?P:$,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),c=new Array(a),s=new Array(a),l=0;l<a;++l){var f=i[l],h=o[l],d=h.length,p=t.call(f,f&&f.__data__,l,i),g=p.length,v=c[l]=new Array(g),y=u[l]=new Array(g);r(f,h,v,y,s[l]=new Array(d),p,n);for(var m,w,_=0,x=0;_<g;++_)if(m=v[_]){for(_>=x&&(x=_+1);!(w=y[x])&&++x<g;);m._next=w||null}}return(u=new Ct(u,i))._enter=c,u._exit=s,u},enter:function(){return new Ct(this._enter||this._groups.map(H),this._parents)},exit:function(){return new Ct(this._exit||this._groups.map(H),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=n[u],l=e[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Ct(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=U);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,s=i[o]=new Array(c),l=0;l<c;++l)(a=u[l])&&(s[l]=a);s.sort(n)}return new Ct(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each((function(){t[++n]=this})),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=S(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?R:O:"function"==typeof n?e.local?L:z:e.local?I:q)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?V:"function"==typeof n?F:Z)(t,n,null==e?"":e)):G(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?J:"function"==typeof n?X:K)(t,n)):this.node()[t]},classed:function(t,n){var e=Y(t+"");if(arguments.length<2){for(var r=Q(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?ot:n?rt:it)(e,n))},text:function(t){return arguments.length?this.each(null==t?at:("function"==typeof t?ct:ut)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?ft:lt)(t)):this.node().innerHTML},raise:function(){return this.each(ht)},lower:function(){return this.each(dt)},append:function(t){var n="function"==typeof t?t:D(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:D(t),r=null==n?pt:"function"==typeof n?n:N(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(gt)},clone:function(t){return this.select(t?yt:vt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=xt(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?At:bt,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?St:kt)(t,n))}};var Et={},Nt={};function Bt(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Ht(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function Mt(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function $t(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+Mt(-n,6):n>9999?"+"+Mt(n,6):Mt(n,4))+"-"+Mt(t.getUTCMonth()+1,2)+"-"+Mt(t.getUTCDate(),2)+(o?"T"+Mt(e,2)+":"+Mt(r,2)+":"+Mt(i,2)+"."+Mt(o,3)+"Z":i?"T"+Mt(e,2)+":"+Mt(r,2)+":"+Mt(i,2)+"Z":r||e?"T"+Mt(e,2)+":"+Mt(r,2)+"Z":"")}var Pt=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,s=!1;function l(){if(c)return Nt;if(s)return s=!1,Et;var n,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(n=a)>=o?c=!0:10===(r=t.charCodeAt(a++))?s=!0:13===r&&(s=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(n=a++)))s=!0;else if(13===r)s=!0,10===t.charCodeAt(a)&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==Nt;){for(var f=[];r!==Et&&r!==Nt;)f.push(r),r=l();n&&null==(f=n(f,u++))||i.push(f)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?$t(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Bt(t);return function(r,i){return n(e(r),i,t)}}(t,n):Bt(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=Ht(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=Ht(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}("\t").parse;function Ut(t){for(var n in t){var e,r,i=t[n].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(e=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ot&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=e;else i=null;t[n]=i}return t}var Ot=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Rt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function qt(t,n){return fetch(t,n).then(Rt)}var It,zt=(It=Pt,function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=void 0),qt(t,n).then((function(t){return It(t,e)}))});function Lt(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return Wt(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Wt(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}function Wt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Vt(t,n){var e=0;if(void 0===n){var r,i=Lt(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;(o=+o)&&(e+=o)}}catch(t){i.e(t)}finally{i.f()}}else{var a,u=-1,c=Lt(t);try{for(c.s();!(a=c.n()).done;){var s=a.value;(s=+n(s,++u,t))&&(e+=s)}}catch(t){c.e(t)}finally{c.f()}}return e}function Zt(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Ft(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return Gt(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Gt(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}function Gt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var Jt=Symbol("implicit");var Kt=function(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Xt(){}function Yt(t,n){var e=new Xt;if(t instanceof Xt)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function Qt(){var t,n,e,r=[],i=[];function o(e,i,a,u){if(i>=r.length)return null!=t&&e.sort(t),null!=n?n(e):e;for(var c,s,l,f=-1,h=e.length,d=r[i++],p=Yt(),g=a();++f<h;)(l=p.get(c=d(s=e[f])+""))?l.push(s):p.set(c,[s]);return p.each((function(t,n){u(g,n,o(t,i,a,u))})),g}return e={object:function(t){return o(t,0,tn,nn)},map:function(t){return o(t,0,en,rn)},entries:function(t){return function t(e,o){if(++o>r.length)return e;var a,u=i[o-1];return null!=n&&o>=r.length?a=e.entries():(a=[],e.each((function(n,e){a.push({key:e,values:t(n,o)})}))),null!=u?a.sort((function(t,n){return u(t.key,n.key)})):a}(o(t,0,en,rn),0)},key:function(t){return r.push(t),e},sortKeys:function(t){return i[r.length-1]=t,e},sortValues:function(n){return t=n,e},rollup:function(t){return n=t,e}}}function tn(){return{}}function nn(t,n,e){t[n]=e}function en(){return Yt()}function rn(t,n,e){t.set(n,e)}function on(){}Xt.prototype=Yt.prototype={constructor:Xt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var an=Yt.prototype;function un(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function cn(t,n){var e,r,i,o,a,u=new hn(t),c=+t.value&&(u.value=t.value),s=[u];for(null==n&&(n=sn);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(a=i.length))for(e.children=new Array(a),o=a-1;o>=0;--o)s.push(r=e.children[o]=new hn(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(fn)}function sn(t){return t.children}function ln(t){t.data=t.data.data}function fn(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function hn(t){this.data=t,this.depth=this.height=0,this.parent=null}function dn(t){if("function"!=typeof t)throw new Error;return t}function pn(){return 0}function gn(t){return function(){return t}}function vn(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function yn(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}function mn(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}on.prototype=function(t,n){var e=new on;if(t instanceof on)t.each((function(t){e.add(t)}));else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}.prototype={constructor:on,has:an.has,add:function(t){return this["$"+(t+="")]=t,this},remove:an.remove,clear:an.clear,values:an.keys,size:an.size,empty:an.empty,each:an.each},hn.prototype=cn.prototype={constructor:hn,count:function(){return this.eachAfter(un)},each:function(t){var n,e,r,i,o=this,a=[o];do{for(n=a.reverse(),a=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();for(;t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each((function(n){t.push(n)})),t},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return cn(this).eachBefore(ln)}};var wn=function t(n){function e(t,e,r,i,o){!function(t,n,e,r,i,o){for(var a,u,c,s,l,f,h,d,p,g,v,y=[],m=n.children,w=0,_=0,x=m.length,b=n.value;w<x;){c=i-e,s=o-r;do{l=m[_++].value}while(!l&&_<x);for(f=h=l,v=l*l*(g=Math.max(s/c,c/s)/(b*t)),p=Math.max(h/v,v/f);_<x;++_){if(l+=u=m[_].value,u<f&&(f=u),u>h&&(h=u),v=l*l*g,(d=Math.max(h/v,v/f))>p){l-=u;break}p=d}y.push(a={value:l,dice:c<s,children:m.slice(w,_)}),a.dice?yn(a,e,r,i,b?r+=s*l/b:o):mn(a,e,r,b?e+=c*l/b:i,o),b-=l,w=_}}(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}((1+Math.sqrt(5))/2);function _n(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=n(t);if(r){var a=n(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return e(this,i)}}function xn(t){var n,e,r,i,o,a,u;return{c:function(){n=c("h1"),e=s("Treemap"),r=l(),i=c("p"),o=s("The hierarchical nature of Treemaps are well suited to overview resource\n  allocation. This implementation shows how hours are distributed accross\n  Clients, Projects, Tasks, and Tools"),a=l(),u=c("div"),this.h()},l:function(t){n=f(t,"H1",{});var c=h(n);e=d(c,"Treemap"),c.forEach(p),r=g(t),i=f(t,"P",{});var s=h(i);o=d(s,"The hierarchical nature of Treemaps are well suited to overview resource\n  allocation. This implementation shows how hours are distributed accross\n  Clients, Projects, Tasks, and Tools"),s.forEach(p),a=g(t),u=f(t,"DIV",{id:!0,style:!0}),h(u).forEach(p),this.h()},h:function(){v(u,"id","treemap_canvas"),y(u,"width","90vw"),y(u,"height","95vh"),y(u,"margin","auto")},m:function(c,s){m(c,n,s),w(n,e),m(c,r,s),m(c,i,s),w(i,o),m(c,a,s),m(c,u,s),t[3](u)},p:_,i:_,o:_,d:function(e){e&&p(n),e&&p(r),e&&p(i),e&&p(a),e&&p(u),t[3](null)}}}function bn(t,n,e){var i,o,a=function(){function t(n,e){r(this,t),this.params={paddingTop:.03,urgencyBorder:8},this.div=Dt("div#"+n),this.width=this.div.node().clientWidth,this.height=this.div.node().clientHeight,this.margin={top:0,left:10,right:4,bottom:50},this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.data=this.aggregate(e),this.colorDomain=this._unique(this.data.map((function(t){return t.Tool}))),this.colorScale=function t(){var n=new Map,e=[],r=[],i=Jt;function o(t){var o=t+"",a=n.get(o);if(!a){if(i!==Jt)return i;n.set(o,a=e.push(t))}return r[(a-1)%r.length]}return o.domain=function(t){if(!arguments.length)return e.slice();e=[],n=new Map;var r,i=Ft(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=a+"";n.has(u)||n.set(u,e.push(a))}}catch(t){i.e(t)}finally{i.f()}return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(e,r).unknown(i)},Zt.apply(o,arguments),o}().domain(this.colorDomain).range(Kt.filter((function(t,n){return 2!==n})));var i=this.getRectData(this.data,this.innerWidth,this.innerHeight),o=A(i,2);this.rectData=o[0],this.maxDepth=o[1],this.svg=this.div.append("svg").attr("width",this.width).attr("height",this.height),this.plot=this.svg.append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.render()}return x(t,[{key:"getRectData",value:function(t,n,e){var r=cn({key:"root",values:Qt().key((function(t){return t.Client})).key((function(t){return t.Project})).key((function(t){return t.Section})).entries(t)},(function(t){return t.values})).sum((function(t){return t.Hours})),i=function(){var t=wn,n=!1,e=1,r=1,i=[0],o=pn,a=pn,u=pn,c=pn,s=pn;function l(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(f),i=[0],n&&t.eachBefore(vn),t}function f(n){var e=i[n.depth],r=n.x0+e,l=n.y0+e,f=n.x1-e,h=n.y1-e;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),n.x0=r,n.y0=l,n.x1=f,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=s(n)-e,l+=a(n)-e,(f-=u(n)-e)<r&&(r=f=(r+f)/2),(h-=c(n)-e)<l&&(l=h=(l+h)/2),t(n,r,l,f,h))}return l.round=function(t){return arguments.length?(n=!!t,l):n},l.size=function(t){return arguments.length?(e=+t[0],r=+t[1],l):[e,r]},l.tile=function(n){return arguments.length?(t=dn(n),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:gn(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:gn(+t),l):a},l.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:gn(+t),l):u},l.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:gn(+t),l):c},l.paddingLeft=function(t){return arguments.length?(s="function"==typeof t?t:gn(+t),l):s},l}().tile(wn.ratio(1)).paddingInner(2).paddingTop(this.params.paddingTop*innerHeight).size([this.innerWidth,this.innerHeight])(r),o=i.leaves()[0].depth;return[i,o]}},{key:"aggregate",value:function(t){var n=this,e=[];return function t(n,e){if(n[0].hasOwnProperty("key"))for(var r=0;r<n.length;r++){t(n[r].values,e)}else e.push(n)}(Qt().key((function(t){return t.Client})).key((function(t){return t.Project})).key((function(t){return t.Section})).key((function(t){return t.Tool})).entries(t),e),console.log(e),e.map((function(t){var e=Vt(t,(function(t){return t.Hours})),r=t.map((function(t){return t.Urgency})).some((function(t){return n._stringEqual(t,"urgent")}));return{Client:t[0].Client,Project:t[0].Project,Section:t[0].Section,Tool:t[0].Tool,Hours:e,Urgency:r?"urgent":"no",raw_data:t}}))}},{key:"render",value:function(){var t=this,n=(this.plot.selectAll("rect.masterBorder").data([null]).join("rect").classed("masterBorder",!0).attr("y",this.innerHeight*this.params.paddingTop).attr("width",this.innerWidth).attr("height",this.innerHeight-this.innerHeight*this.params.paddingTop).attr("stroke","black").attr("fill","white").attr("stroke-width",0),this.plot.selectAll("g.background").data(this.rectData.descendants().filter((function(n){return 0!==n.depth&&n.depth!==t.maxDepth}))).join("g").classed("background",!0).attr("transform",(function(t){return"translate(".concat(t.x0,",").concat(t.y0,")")}))),e=this.plot.selectAll("g.cell").data(this.rectData.leaves()).join("g").classed("cell",!0).attr("transform",(function(t){return"translate(".concat(t.x0,",").concat(t.y0,")")}));e.selectAll("rect").data((function(t){return[t]})).join("rect").attr("width",(function(t){return t.x1-t.x0})).attr("height",(function(t){return t.y1-t.y0})).style("fill",(function(n){return t.colorScale(n.data.Tool)})),e.selectAll("text.squareNumber").data((function(t){return[t]})).join("text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-family","sans-serif").classed("squareNumber",!0).attr("x",(function(t){return(t.x1-t.x0)/2})).attr("y",(function(t){return 2+(t.y1-t.y0)/2})).text((function(t){return t.value})).attr("font-size",(function(t){var n=(t.x1-t.x0)*(t.y1-t.y0);return.4*Math.sqrt(n)})).attr("fill",(function(n){return t._stringEqual(n.data.Urgency,"urgent")?"firebrick":"white"})),n.selectAll("rect.descendants").data((function(t){return[t]})).join("rect").classed("descendants",!0).attr("width",(function(t){return t.x1-t.x0})).attr("height",innerHeight*this.params.paddingTop).style("stroke","lightgray").attr("stroke-width",1).attr("fill",(function(t){return 1===t.depth?"black":2===t.depth?"lightgray":"white"})).selectAll("title").data((function(t){return[t]})).join("title").text((function(t){return t.data.key})),n.selectAll("text.descendants").data((function(t){return[t]})).join("text").classed("descendants",!0).join("text").classed("descendants",!0).attr("font-family","sans-serif").attr("text-anchor","middle").attr("y",2+innerHeight*this.params.paddingTop/2).attr("x",(function(t){return(t.x1-t.x0)/2})).text((function(t){return t.data.key})).attr("alignment-baseline","middle").attr("font-size",18).attr("font-weight",(function(t){if(1===t.depth)return"bolder"})).attr("fill",(function(t){return 1===t.depth?"white":"black"})).attr("pointer-events","none"),n.selectAll("text.descendants").each((function(){this.getBBox().width>Dt(this.parentNode).select("rect.descendants").node().getBBox().width&&Dt(this).text("...").attr("font-size",16)}));var r=this.plot.selectAll("g.colorLegend").data([null]).join("g").classed("colorLegend",!0).attr("transform","translate(-2.5,".concat(this.innerHeight+2,")")),i=r.selectAll("g").data(this.colorDomain).join("g").attr("transform",(function(n,e){return"translate(".concat(e*(t.innerWidth/t.colorDomain.length),",0)")}));i.selectAll("rect.color").data((function(t){return[t]})).join("rect").classed("color",!0).attr("x",5).attr("y",(this.margin.bottom-2)/2).attr("width",this.innerWidth/this.colorDomain.length-5).attr("stroke","black").attr("height",(this.margin.bottom-2)/2-2).attr("fill",(function(n){return t.colorScale(n)})),i.selectAll("text.label").data((function(t){return[t]})).join("text").attr("font-family","sans-serif").classed("label",!0).attr("y",1+(this.margin.bottom-2)/4+(this.margin.bottom-2)/2).attr("x",this.innerWidth/this.colorDomain.length/2).text((function(n){var e=Vt(t.data.filter((function(t){return t.Tool===n})),(function(t){return t.Hours}));return"".concat(n,": ").concat(e)})).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",18).attr("font-weight","bold"),r.selectAll("text.title").data([null]).join("text").attr("font-family","sans-serif").text("Tools").attr("text-anchor","middle").attr("x",this.innerWidth/2).attr("alignment-baseline","middle").attr("y",this.margin.bottom/4).attr("font-size",18).attr("font-weight","bold")}},{key:"_unique",value:function(t){return t.filter((function(t,n,e){return e.indexOf(t)===n}))}},{key:"_stringEqual",value:function(t,n){return t.toUpperCase()===n.toUpperCase()}}]),t}();return t.$$.update=function(){1&t.$$.dirty&&i&&zt("vizzes/treemap/data.tsv",Ut).then((function(t){o=new a("treemap_canvas",t)}))},[i,o,a,function(t){b[t?"unshift":"push"]((function(){e(0,i=t)}))}]}var An=function(n){t(c,u);var e=_n(c);function c(t){var n;return r(this,c),n=e.call(this),i(a(n),t,bn,xn,o,{}),n}return c}();export default An;
